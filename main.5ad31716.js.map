{"version":3,"sources":["scripts/main.js"],"names":["i","selectedTr","table","document","querySelector","tbody","list","children","strFormat","a","cellIndex","querySelectorAll","textContent","split","join","sortList","items","sortType","sort","b","textA","textB","isNaN","sortOfType","numberWithComma","x","toString","replace","addEventListener","e","tableItem","target","closest","append","tr","contains","classList","remove","add","form","createElement","createLabeledInput","labelText","inputType","dataQaValue","label","input","setAttribute","body","appendChild","nameLabeledInput","positionLabeledInput","selectLabel","select","offices","selectForm","town","option","t","createTextNode","ageLabel","ageInput","salaryLabel","salaryInput","salaryCheck","value","pushNotification","button","arr","getElementsByTagName","map","el","title","description","type","notification","insertAdjacentHTML","setTimeout","style","display","validateForm","nameN","ageN","length","preventDefault","nameValue","positionV","ageV","salaryV","newEmp","options","text","elem","td","addForm","reset","event","cell","cellItems","item","index","Array","from","findIndex","n","tempValue","innerText","innerHTML","focus","onblur","itemValidation","evt","code","k","trim"],"mappings":";AAAA,aAsPA,SAAA,EAAA,GAAA,GAAA,oBAAA,QAAA,MAAA,EAAA,OAAA,UAAA,CAAA,GAAA,MAAA,QAAA,KAAA,EAAA,EAAA,IAAA,CAAA,IAAA,EAAA,EAAA,EAAA,aAAA,MAAA,CAAA,EAAA,EAAA,EAAA,WAAA,OAAA,GAAA,EAAA,OAAA,CAAA,MAAA,GAAA,CAAA,MAAA,EAAA,MAAA,EAAA,OAAA,EAAA,SAAA,GAAA,MAAA,GAAA,EAAA,GAAA,MAAA,IAAA,UAAA,yIAAA,IAAA,EAAA,EAAA,GAAA,EAAA,GAAA,EAAA,MAAA,CAAA,EAAA,WAAA,EAAA,EAAA,OAAA,aAAA,EAAA,WAAA,IAAA,EAAA,EAAA,OAAA,OAAA,EAAA,EAAA,KAAA,GAAA,EAAA,SAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EAAA,WAAA,IAAA,GAAA,MAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,KAAA,SAAA,EAAA,GAAA,OAAA,EAAA,IAAA,EAAA,IAAA,EAAA,IAAA,IAAA,SAAA,IAAA,MAAA,IAAA,UAAA,wIAAA,SAAA,EAAA,EAAA,GAAA,GAAA,EAAA,CAAA,GAAA,iBAAA,EAAA,OAAA,EAAA,EAAA,GAAA,IAAA,EAAA,OAAA,UAAA,SAAA,KAAA,GAAA,MAAA,GAAA,GAAA,MAAA,WAAA,GAAA,EAAA,cAAA,EAAA,EAAA,YAAA,MAAA,QAAA,GAAA,QAAA,EAAA,MAAA,KAAA,GAAA,cAAA,GAAA,2CAAA,KAAA,GAAA,EAAA,EAAA,QAAA,GAAA,SAAA,EAAA,GAAA,GAAA,oBAAA,QAAA,OAAA,YAAA,OAAA,GAAA,OAAA,MAAA,KAAA,GAAA,SAAA,EAAA,GAAA,GAAA,MAAA,QAAA,GAAA,OAAA,EAAA,GAAA,SAAA,EAAA,EAAA,IAAA,MAAA,GAAA,EAAA,EAAA,UAAA,EAAA,EAAA,QAAA,IAAA,IAAA,EAAA,EAAA,EAAA,IAAA,MAAA,GAAA,EAAA,EAAA,IAAA,EAAA,GAAA,EAAA,GAAA,OAAA,EApPA,IAUIA,EA+CAC,EAzDEC,EAAQC,SAASC,cAAc,SAE/BC,EAAQF,SAASC,cAAc,SAC/BE,EAAOD,EAAME,SAEbC,EAAY,SAASC,EAAGC,GACrBD,OAAAA,EAAEE,iBAAiB,MAAMD,GAC7BE,YAAYC,MAAM,KAAKC,KAAK,IAAID,MAAM,KAAKC,KAAK,KAK/CC,EAAW,SAASC,EAAOC,GACxB,OAAA,EAAID,GAAOE,KAAK,SAACT,EAAGU,GACnBC,IAAAA,EAAQZ,EAAUC,EAAGT,GACrBqB,EAAQb,EAAUW,EAAGnB,GAEvBiB,MAAa,QAAbA,EACEK,MAAMF,IAAUE,MAAMD,GACjBD,EAAQC,EAAQ,GAAK,EAEpBD,EAAQC,EAIH,SAAbJ,EACEK,MAAMF,IAAUE,MAAMD,GACjBA,EAAQD,EAAQ,GAAK,EAEpBC,EAAQD,OAJhBH,KAUJM,EAAa,MAkBjB,SAASC,EAAgBC,GAChBA,OAAAA,EAAEC,WAAWC,QAAQ,wBAAyB,KAjBvDzB,EAAM0B,iBAAiB,QAAS,SAACC,GACzBC,IAKqB,EAGpB,EAPDpB,EADYmB,EAAEE,OAAOC,QAAQ,MACPtB,WAE5BV,EAAIU,EAEe,SAAfa,KACFpB,EAAAA,SAASC,cAAc,UAAS6B,OAAUlB,MAAAA,EAAAA,EAAAA,EAAST,EAAM,MAAOI,KAChEa,EAAa,SAEbpB,EAAAA,SAASC,cAAc,UAAS6B,OAAUlB,MAAAA,EAAAA,EAAAA,EAAST,EACjD,OAAQI,KACVa,EAAa,UAUjBrB,EAAM0B,iBAAiB,QAAS,SAACC,GACzBK,IAAAA,EAAKL,EAAEE,OAAOC,QAAQ,MAUvBE,GAIAhC,EAAMiC,SAASD,KAXdjC,GACFA,EAAWmC,UAAUC,OAAO,WAE9BpC,EAAaiC,GACFE,UAAUE,IAAI,aAc7B,IAAMC,EAAOpC,SAASqC,cAAc,QAKpC,SAASC,EAAmBC,EAAWC,EAAWC,GAC1CC,IAAAA,EAAQ1C,SAASqC,cAAc,SAErCK,EAAMjC,YAAc8B,EAEdI,IAAAA,EAAQ3C,SAASqC,cAAc,SAQ9BK,OANPC,EAAMC,aAAa,OAAQJ,GAC3BG,EAAMC,aAAa,UAAWH,GAC9BE,EAAMC,aAAa,UAAW,aAE9BF,EAAMZ,OAAOa,GAEND,EAhBTN,EAAKQ,aAAa,QAAS,qBAC3B5C,SAAS6C,KAAKC,YAAYV,GAkB1B,IAAMW,EAAmBT,EAAmB,QAAS,OAAQ,QAE7DF,EAAKU,YAAYC,GAEjB,IAAMC,EAAuBV,EAAmB,YAC9C,OAAQ,YAEVF,EAAKU,YAAYE,GAEjB,IAAMC,EAAcjD,SAASqC,cAAc,SAE3CY,EAAYxC,YAAc,UAE1B,IAAMyC,EAASlD,SAASqC,cAAc,UAEtCa,EAAON,aAAa,UAAW,UAC/BM,EAAON,aAAa,WAAY,IAChCK,EAAYnB,OAAOoB,GACnBd,EAAKU,YAAYG,GAEjB,IAAME,EAAU,CAAC,QAAS,YAAa,SACrC,WAAY,YAAa,iBAErBC,EAAa,WACED,IADS,EACTA,EAAAA,EAAAA,GADS,IACA,IAAA,EAAA,MAAA,EAAA,EAAA,KAAA,MAAA,CAAjBE,IAAAA,EAAiB,EAAA,MACpBC,EAAStD,SAASqC,cAAc,UAEtCiB,EAAOV,aAAa,QAASS,GAEvBE,IAAAA,EAAIvD,SAASwD,eAAeH,GAElCC,EAAOR,YAAYS,GACnBL,EAAOJ,YAAYQ,IATO,MAAA,GAAA,EAAA,EAAA,GAAA,QAAA,EAAA,MAa9BF,IAEA,IAAMK,EAAWzD,SAASqC,cAAc,SAExCoB,EAAShD,YAAc,OAEvB,IAAMiD,EAAW1D,SAASqC,cAAc,SAExCqB,EAASd,aAAa,OAAQ,UAC9Bc,EAASd,aAAa,UAAW,OACjCa,EAAS3B,OAAO4B,GAChBtB,EAAKU,YAAYW,GAEjB,IAAME,EAAc3D,SAASqC,cAAc,SAE3CsB,EAAYlD,YAAc,UAE1B,IAAMmD,EAAc5D,SAASqC,cAAc,SAK3C,SAASwB,EAAYC,GACfF,KAAAA,EAAYE,MAAQ,GAIf,OAAA,EAHPC,EAAiB,QAAS,yBACxB,SANNH,EAAYhB,aAAa,OAAQ,UACjCgB,EAAYhB,aAAa,UAAW,UAWpCe,EAAY7B,OAAO8B,GACnBxB,EAAKU,YAAYa,GAEjB,IAAMK,EAAShE,SAASqC,cAAc,UAEtC2B,EAAOvD,YAAc,gBACrB2B,EAAKU,YAAYkB,GAEjB,IAAMC,EAAMjE,SAASkE,qBAAqB,SAE1C,EAAID,GAAKE,IAAI,SAAAC,GAAMA,OAAAA,EAAGxB,aAAa,WAAY,MAE/C,IAAMmB,EAAmB,SAACM,EAAOC,EAAaC,GACtCC,IAAAA,EAAexE,SAASqC,cAAc,OAE5CmC,EAAa5B,aAAa,QAAyB2B,gBAAAA,OAAAA,IACnDC,EAAa5B,aAAa,UAAW,gBAErC4B,EAAaC,mBAAmB,aACPJ,uBAAAA,OAAAA,EAAgBC,YAAAA,OAAAA,EADzC,SAGAtE,SAAS6C,KAAKf,OAAO0C,GAErBE,WAAW,WACTF,EAAaG,MAAMC,QAAU,QAC5B,MAGL,SAASC,EAAaC,EAAOC,GACvBD,GAAAA,EAAME,OAAS,EACjBjB,EAAiB,QAAS,2CACxB,aACG,CAAA,KAAIgB,EAAO,IAAMA,EAAO,IAItB,OAAA,EAHPhB,EAAiB,QAAS,oCACxB,UAMN3B,EAAKX,iBAAiB,SAAU,SAACC,GAC/BA,EAAEuD,iBAEIC,IAAAA,EAAYlF,SAASkE,qBAAqB,SAAS,GAAGJ,MACtDqB,EAAYnF,SAASkE,qBAAqB,SAAS,GAAGJ,MACtDsB,EAAOpF,SAASkE,qBAAqB,SAAS,GAAGJ,MACjDuB,EAAU,IAAMrF,SAASkE,qBAAqB,SAAS,GAAGJ,MAI1DwB,EAAS,CAACJ,EAAWC,EAFRnF,SAASC,cAAc,UACfsF,QAAQ1F,GAAG2F,KACSJ,EAAMC,GAEjDR,IAAkC,IAAlCA,EAAaK,EAAWE,KACY,IAAnCvB,EAAYD,EAAYE,OAAiB,EAC5B,WACR/B,IADmB,EACnBA,EAAK/B,SAASqC,cAAc,MAEfiD,EAAAA,EAAAA,GAHM,IAGE,IAAA,EAAA,MAAA,EAAA,EAAA,KAAA,MAAA,CAAhBG,IAAAA,EAAgB,EAAA,MACnBC,EAAK1F,SAASqC,cAAc,MAElCqD,EAAGjF,YAAcgF,EACjB1D,EAAGD,OAAO4D,IAPa,MAAA,GAAA,EAAA,EAAA,GAAA,QAAA,EAAA,IASzBxF,EAAM4B,OAAOC,GAGf4D,GAEA5B,EAAiB,UAAW,+EACmB,WAE/C3B,EAAKwD,WAIT7F,EAAM0B,iBAAiB,WACrB,WACEoE,MAAMZ,iBAEAa,IAAAA,EAAOD,MAAMjE,OAEf,GAACkE,GAAS/F,EAAMiC,SAAS8D,GAAzB,CAIEC,IAGFC,EAHED,EAAYhG,EAAMS,iBAAiB,MACnCyF,EAAQC,MAAMC,KAAKJ,GAAWK,UAAU,SAAAC,GAAKA,OAAAA,IAAMP,IAAQ,EAC3DQ,EAAYR,EAAKS,UAGfN,OAAAA,GACD,KAAA,GACHD,EAAOhG,SAASqC,cAAc,WAEzBmE,UAAL,uRAMA,MAEG,KAAA,EACA,KAAA,GACHR,EAAOhG,SAASqC,cAAc,UACzBO,aAAa,OAAQ,QAC1B,MAEG,KAAA,EACA,KAAA,GACHoD,EAAOhG,SAASqC,cAAc,UACzBO,aAAa,OAAQ,UAI9BkD,EAAKS,UAAY,GACjBT,EAAKhE,OAAOkE,GACZA,EAAKS,QAELT,EAAKU,OAAS,WACZC,EAAeV,IAGjBD,EAAKvE,iBAAiB,UAAW,SAACmF,GACf,UAAbA,EAAIC,MAIRF,EAAeV,KAGXU,IAAAA,EAAiB,SAACG,GAKdA,OAJHd,EAAKlC,QACRgC,EAAKS,UAAYD,GAGXQ,GACD,KAAA,EACCd,GAAAA,EAAKlC,MAAMiD,OAAO/B,OAAS,EAAG,CAChCc,EAAKS,UAAYD,EAEjBvC,EAAiB,QACf,2CACA,SACF,MAEF+B,EAAKS,UAAYP,EAAKlC,MACtB,MACG,KAAA,EACCkC,GAAAA,EAAKlC,MAAMiD,OAAO/B,OAAS,EAAG,CAChCc,EAAKS,UAAYD,EAEjBvC,EAAiB,QACf,4BAAA,SACF,MAEF+B,EAAKS,UAAYP,EAAKlC,MACtB,MACG,KAAA,EACCkC,GAAAA,EAAKlC,MAAQ,IAAMkC,EAAKlC,MAAQ,GAAI,CACtCgC,EAAKS,UAAYD,EAEjBvC,EAAiB,QAAS,oCACxB,SACF,MAEF+B,EAAKS,UAAYP,EAAKlC,MACtB,MACG,KAAA,EACCkC,GAAAA,EAAKlC,MAAQ,GAAKkC,EAAKlC,MAAMiD,OAAO/B,OAAS,EAAG,CAClDc,EAAKS,UAAYD,EAEjBvC,EAAiB,QAAS,yBACxB,SACF,MAEF+B,EAAKS,UAAgBlF,IAAAA,OAAAA,EAAgB2E,EAAKlC,QAC1C,MACF,QACEgC,EAAKS,UAAYP,EAAKlC,MAE1BkC,EAAK9D","file":"main.5ad31716.js","sourceRoot":"../src","sourcesContent":["'use strict';\n\nconst table = document.querySelector('table');\n\nconst tbody = document.querySelector('tbody');\nconst list = tbody.children;\n\nconst strFormat = function(a, cellIndex) {\n  return a.querySelectorAll('td')[cellIndex]\n    .textContent.split('$').join('').split(',').join('');\n};\n\nlet i;\n\nconst sortList = function(items, sortType) {\n  return [...items].sort((a, b) => {\n    const textA = strFormat(a, i);\n    const textB = strFormat(b, i);\n\n    if (sortType === 'asc') {\n      if (isNaN(textA) && isNaN(textB)) {\n        return textA > textB ? 1 : -1;\n      } else {\n        return (textA - textB);\n      }\n    }\n\n    if (sortType === 'desc') {\n      if (isNaN(textA) && isNaN(textB)) {\n        return textB > textA ? 1 : -1;\n      } else {\n        return (textB - textA);\n      }\n    }\n  });\n};\n\nlet sortOfType = 'asc';\n\ntable.addEventListener('click', (e) => {\n  const tableItem = e.target.closest('th');\n  const cellIndex = tableItem.cellIndex;\n\n  i = cellIndex;\n\n  if (sortOfType === 'desc') {\n    document.querySelector('tbody').append(...sortList(list, 'asc', cellIndex));\n    sortOfType = 'asc';\n  } else {\n    document.querySelector('tbody').append(...sortList(list,\n      'desc', cellIndex));\n    sortOfType = 'desc';\n  }\n});\n\nfunction numberWithComma(x) {\n  return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n};\n\nlet selectedTr;\n\ntable.addEventListener('click', (e) => {\n  const tr = e.target.closest('tr');\n\n  function selected() {\n    if (selectedTr) {\n      selectedTr.classList.remove('active');\n    }\n    selectedTr = tr;\n    selectedTr.classList.add('active');\n  }\n\n  if (!tr) {\n    return;\n  }\n\n  if (!table.contains(tr)) {\n    return;\n  }\n\n  selected(tr);\n});\n\nconst form = document.createElement('form');\n\nform.setAttribute('class', 'new-employee-form');\ndocument.body.appendChild(form);\n\nfunction createLabeledInput(labelText, inputType, dataQaValue) {\n  const label = document.createElement('label');\n\n  label.textContent = labelText;\n\n  const input = document.createElement('input');\n\n  input.setAttribute('type', inputType);\n  input.setAttribute('data-qa', dataQaValue);\n  input.setAttribute('pattern', '[a-zA-Z]+');\n\n  label.append(input);\n\n  return label;\n}\n\nconst nameLabeledInput = createLabeledInput('Name:', 'text', 'name');\n\nform.appendChild(nameLabeledInput);\n\nconst positionLabeledInput = createLabeledInput('Position:',\n  'text', 'position');\n\nform.appendChild(positionLabeledInput);\n\nconst selectLabel = document.createElement('label');\n\nselectLabel.textContent = 'Office:';\n\nconst select = document.createElement('select');\n\nselect.setAttribute('data-qa', 'office');\nselect.setAttribute('required', '');\nselectLabel.append(select);\nform.appendChild(selectLabel);\n\nconst offices = ['Tokyo', 'Singapore', 'London',\n  'New York', 'Edinburgh', 'San Francisco'];\n\nconst selectForm = function() {\n  for (const town of offices) {\n    const option = document.createElement('option');\n\n    option.setAttribute('value', town);\n\n    const t = document.createTextNode(town);\n\n    option.appendChild(t);\n    select.appendChild(option);\n  }\n};\n\nselectForm();\n\nconst ageLabel = document.createElement('label');\n\nageLabel.textContent = 'Age:';\n\nconst ageInput = document.createElement('input');\n\nageInput.setAttribute('type', 'number');\nageInput.setAttribute('data-qa', 'age');\nageLabel.append(ageInput);\nform.appendChild(ageLabel);\n\nconst salaryLabel = document.createElement('label');\n\nsalaryLabel.textContent = 'Salary:';\n\nconst salaryInput = document.createElement('input');\n\nsalaryInput.setAttribute('type', 'number');\nsalaryInput.setAttribute('data-qa', 'salary');\n\nfunction salaryCheck(value) {\n  if (salaryInput.value < 0) {\n    pushNotification('Error', 'Salary must be over 0.',\n      'error');\n  } else {\n    return true;\n  }\n}\n\nsalaryLabel.append(salaryInput);\nform.appendChild(salaryLabel);\n\nconst button = document.createElement('button');\n\nbutton.textContent = 'Save to table';\nform.appendChild(button);\n\nconst arr = document.getElementsByTagName('input');\n\n[...arr].map(el => el.setAttribute('required', ''));\n\nconst pushNotification = (title, description, type) => {\n  const notification = document.createElement('div');\n\n  notification.setAttribute('class', `notification ${type}`);\n  notification.setAttribute('data-qa', 'notification');\n\n  notification.insertAdjacentHTML('afterBegin',\n    `<h2 class = 'title'>${title}</h2><p>${description}</p>`);\n\n  document.body.append(notification);\n\n  setTimeout(() => {\n    notification.style.display = 'none';\n  }, 2000);\n};\n\nfunction validateForm(nameN, ageN) {\n  if (nameN.length < 4) {\n    pushNotification('Error', 'Name length must be more than 4 letters.',\n      'error');\n  } else if (ageN < 18 || ageN > 90) {\n    pushNotification('Error', 'Age must be over 18 but under 90.',\n      'error');\n  } else {\n    return true;\n  }\n};\n\nform.addEventListener('submit', (e) => {\n  e.preventDefault();\n\n  const nameValue = document.getElementsByTagName('input')[0].value;\n  const positionV = document.getElementsByTagName('input')[1].value;\n  const ageV = document.getElementsByTagName('input')[2].value;\n  const salaryV = '$' + document.getElementsByTagName('input')[3].value;\n\n  const selectElem = document.querySelector('select');\n  const officeV = selectElem.options[i].text;\n  const newEmp = [nameValue, positionV, officeV, ageV, salaryV];\n\n  if (validateForm(nameValue, ageV) === true\n    && salaryCheck(salaryInput.value) === true) {\n    const addForm = function() {\n      const tr = document.createElement('tr');\n\n      for (const elem of newEmp) {\n        const td = document.createElement('td');\n\n        td.textContent = elem;\n        tr.append(td);\n      }\n      tbody.append(tr);\n    };\n\n    addForm();\n\n    pushNotification('Success', 'The form is filled out correctly.<br>'\n      + 'The new employee is added to the table.', 'success');\n\n    form.reset();\n  }\n});\n\ntable.addEventListener('dblclick',\n  function() {\n    event.preventDefault();\n\n    const cell = event.target;\n\n    if (!cell || !table.contains(cell)) {\n      return;\n    }\n\n    const cellItems = table.querySelectorAll('td');\n    const index = Array.from(cellItems).findIndex(n => n === cell) % 5;\n    const tempValue = cell.innerText;\n    let item;\n\n    switch (index) {\n      case 2:\n        item = document.createElement('select');\n\n        item.innerHTML = `<option value=\"Tokyo\">Tokyo</option>\n  <option value=\"Singapore\">Singapore</option>\n  <option value=\"London\">London</option>\n  <option value=\"New York\">New York</option>\n  <option value=\"Edinburgh\">Edinburgh</option>\n  <option value=\"San Francisco\">San Francisco</option>`;\n        break;\n\n      case 0:\n      case 1:\n        item = document.createElement('input');\n        item.setAttribute('type', 'text');\n        break;\n\n      case 3:\n      case 4:\n        item = document.createElement('input');\n        item.setAttribute('type', 'number');\n        break;\n    }\n\n    cell.innerText = '';\n    cell.append(item);\n    item.focus();\n\n    item.onblur = () => {\n      itemValidation(index);\n    };\n\n    item.addEventListener('keydown', (evt) => {\n      if (evt.code !== 'Enter') {\n        return;\n      }\n\n      itemValidation(index);\n    });\n\n    const itemValidation = (k) => {\n      if (!item.value) {\n        cell.innerText = tempValue;\n      }\n\n      switch (k) {\n        case 0:\n          if (item.value.trim().length < 4) {\n            cell.innerText = tempValue;\n\n            pushNotification('Error',\n              'Name length must be more than 4 letters.',\n              'error');\n            break;\n          }\n          cell.innerText = item.value;\n          break;\n        case 1:\n          if (item.value.trim().length < 1) {\n            cell.innerText = tempValue;\n\n            pushNotification('Error', `Position: cannot be empty`,\n              'error');\n            break;\n          }\n          cell.innerText = item.value;\n          break;\n        case 3:\n          if (item.value < 18 || item.value > 90) {\n            cell.innerText = tempValue;\n\n            pushNotification('Error', 'Age must be over 18 but under 90.',\n              'error');\n            break;\n          }\n          cell.innerText = item.value;\n          break;\n        case 4:\n          if (item.value < 0 || item.value.trim().length < 1) {\n            cell.innerText = tempValue;\n\n            pushNotification('Error', 'Salary must be over 0.',\n              'error');\n            break;\n          }\n          cell.innerText = `$${numberWithComma(item.value)}`;\n          break;\n        default:\n          cell.innerText = item.value;\n      }\n      item.remove();\n    };\n  });\n"]}